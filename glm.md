GLM-4
GLM-4 æä¾›äº†å¤šæ¬¾æ¨¡å‹ï¼Œé€‚ç”¨äºå„ç§åº”ç”¨åœºæ™¯ã€‚æŸ¥çœ‹GLM-4ç³»åˆ—æ¨¡å‹æ¯”è¾ƒï¼Œé€‰æ‹©æœ€é€‚åˆçš„æ¨¡å‹ã€‚

æ¨¡å‹ç¼–ç ï¼šglm-4-plusã€glm-4-0520ã€glm-4 ã€glm-4-airã€glm-4-airxã€glm-4-long ã€ glm-4-flashx ã€ glm-4-flash


ğŸ’¡ è¶…ç‡ƒçœé’±å­£ï¼Œå›½åº†æœˆç‹‚æ¬¢

æ ¹æ®å‰ä¸€æ—¥Tokensçš„æ¶ˆè€—é‡ï¼Œæ‚¨çš„è´¦æˆ·å°†è‡ªåŠ¨é€‚ç”¨ç›¸åº”çš„APIè°ƒç”¨æŠ˜æ‰£ï¼Œå…·ä½“è§„åˆ™å¦‚ä¸‹ï¼š

å‰ä¸€æ—¥Tokensæ¶ˆè€—è¶…è¿‡1äº¿ï¼šæ¬¡æ—¥APIè°ƒç”¨ äº«å—5æŠ˜ ä¼˜æƒ ã€‚
å‰ä¸€æ—¥Tokensæ¶ˆè€—è¶…è¿‡10äº¿ï¼šæ¬¡æ—¥APIè°ƒç”¨ äº«å—3æŠ˜ ä¼˜æƒ ã€‚
å‰ä¸€æ—¥Tokensæ¶ˆè€—è¶…è¿‡100äº¿ï¼šæ¬¡æ—¥APIè°ƒç”¨ äº«å—1æŠ˜ ä¼˜æƒ ã€‚
æ¯æ—¥å‡Œæ™¨1ç‚¹ï¼Œç³»ç»Ÿå°†æ ¹æ®å‰ä¸€æ—¥çš„Tokensæ¶ˆè€—æƒ…å†µï¼Œè‡ªåŠ¨æ›´æ–°å¹¶å³æ—¶ç”Ÿæ•ˆæœ€æ–°æŠ˜æ‰£ã€‚

äº†è§£è¯¦æƒ…ï¼šç‚¹å‡»è¿™é‡Œ
åŒæ­¥è°ƒç”¨
æ¥å£è¯·æ±‚

ç±»å‹	è¯´æ˜
æ–¹æ³•	https
è¯·æ±‚URL	https://open.bigmodel.cn/api/paas/v4/chat/completions
è°ƒç”¨æ–¹å¼	åŒæ­¥è°ƒç”¨ï¼Œç­‰å¾…æ¨¡å‹å®Œæˆæ‰§è¡Œå¹¶è¿”å›æœ€ç»ˆç»“æœæˆ–ä½¿ç”¨SSEè°ƒç”¨
å­—ç¬¦ç¼–ç 	UTF-8
è¯·æ±‚æ ¼å¼	JSON
å“åº”æ ¼å¼	JSONæˆ–æ ‡å‡†Stream Event
è¯·æ±‚ç±»å‹	POST
å¼€å‘è¯­è¨€	ä»»ä½•èƒ½å¤Ÿå‘èµ·HTTPè¯·æ±‚çš„å¼€å‘è¯­è¨€
è¯·æ±‚å‚æ•°
å‚æ•°åç§°	ç±»å‹	å¿…å¡«	å‚æ•°æè¿°
model	String	æ˜¯	è¦è°ƒç”¨çš„æ¨¡å‹ç¼–ç ã€‚
messages	List<Object>	æ˜¯	è°ƒç”¨è¯­è¨€æ¨¡å‹æ—¶ï¼Œå½“å‰å¯¹è¯æ¶ˆæ¯åˆ—è¡¨ä½œä¸ºæ¨¡å‹çš„æç¤ºè¾“å…¥ï¼Œä»¥JSONæ•°ç»„å½¢å¼æä¾›ï¼Œä¾‹å¦‚{"role": "user", "content": "Hello"}ã€‚å¯èƒ½çš„æ¶ˆæ¯ç±»å‹åŒ…æ‹¬ç³»ç»Ÿæ¶ˆæ¯ã€ç”¨æˆ·æ¶ˆæ¯ã€åŠ©æ‰‹æ¶ˆæ¯å’Œå·¥å…·æ¶ˆæ¯ã€‚
request_id	String	å¦	ç”±ç”¨æˆ·ç«¯ä¼ é€’ï¼Œéœ€è¦å”¯ä¸€ï¼›ç”¨äºåŒºåˆ†æ¯æ¬¡è¯·æ±‚çš„å”¯ä¸€æ ‡è¯†ç¬¦ã€‚å¦‚æœç”¨æˆ·ç«¯æœªæä¾›ï¼Œå¹³å°å°†é»˜è®¤ç”Ÿæˆã€‚
do_sample	Boolean	å¦	å½“do_sampleä¸ºtrueæ—¶ï¼Œå¯ç”¨é‡‡æ ·ç­–ç•¥ï¼›å½“do_sampleä¸ºfalseæ—¶ï¼Œæ¸©åº¦å’Œtop_pç­‰é‡‡æ ·ç­–ç•¥å‚æ•°å°†ä¸ç”Ÿæ•ˆã€‚é»˜è®¤å€¼ä¸ºtrueã€‚
stream	Boolean	å¦	è¯¥å‚æ•°åœ¨ä½¿ç”¨åŒæ­¥è°ƒç”¨æ—¶åº”è®¾ç½®ä¸ºfalseæˆ–çœç•¥ã€‚è¡¨ç¤ºæ¨¡å‹åœ¨ç”Ÿæˆæ‰€æœ‰å†…å®¹åä¸€æ¬¡æ€§è¿”å›æ‰€æœ‰å†…å®¹ã€‚é»˜è®¤å€¼ä¸ºfalseã€‚å¦‚æœè®¾ç½®ä¸ºtrueï¼Œæ¨¡å‹å°†é€šè¿‡æ ‡å‡†Event Streamé€å—è¿”å›ç”Ÿæˆçš„å†…å®¹ã€‚å½“Event Streamç»“æŸæ—¶ï¼Œå°†è¿”å›ä¸€ä¸ªdata: [DONE]æ¶ˆæ¯ã€‚
temperature	Float	å¦	é‡‡æ ·æ¸©åº¦ï¼Œæ§åˆ¶è¾“å‡ºçš„éšæœºæ€§ï¼Œå¿…é¡»ä¸ºæ­£æ•°å–å€¼èŒƒå›´æ˜¯ï¼š[0.0, 1.0]ï¼Œé»˜è®¤å€¼ä¸º0.95ã€‚
top_p	Float	å¦	å¦ç”¨æ¸©åº¦å–æ ·çš„å¦ä¸€ç§æ–¹æ³•ï¼Œå–å€¼èŒƒå›´æ˜¯ï¼š[0.0, 1.0]ï¼Œé»˜è®¤å€¼ä¸º0.7ã€‚
max_tokens	Integer	å¦	æ¨¡å‹è¾“å‡ºçš„æœ€å¤§tokenæ•°ï¼Œæœ€å¤§è¾“å‡ºä¸º4095ï¼Œé»˜è®¤å€¼ä¸º1024ã€‚
stop	List	å¦	æ¨¡å‹é‡åˆ°stopæŒ‡å®šçš„å­—ç¬¦æ—¶ä¼šåœæ­¢ç”Ÿæˆã€‚ç›®å‰ä»…æ”¯æŒå•ä¸ªstopè¯ï¼Œæ ¼å¼ä¸º["stop_word1"]ã€‚
tools	List	å¦	æ¨¡å‹å¯ä»¥è°ƒç”¨çš„å·¥å…·ã€‚
â€ƒâ€ƒtype	String	æ˜¯	å·¥å…·ç±»å‹ï¼Œç›®å‰æ”¯æŒ functionã€retrievalã€web_searchã€‚

function: `Object` (å¿…éœ€): ä»…å½“å·¥å…·ç±»å‹ä¸º function æ—¶è¡¥å……ã€‚
â€ƒname: `String` (å¿…éœ€): å‡½æ•°åç§°ï¼Œåªèƒ½åŒ…å« a-zã€A-Zã€0-9ã€ä¸‹åˆ’çº¿å’Œè¿å­—ç¬¦ã€‚æœ€å¤§é•¿åº¦é™åˆ¶ä¸º64ã€‚
â€ƒdescription: `String` (å¿…éœ€): ç”¨äºæè¿°å‡½æ•°çš„èƒ½åŠ›ã€‚æ¨¡å‹å°†æ ¹æ®æ­¤æè¿°ç¡®å®šå‡½æ•°è°ƒç”¨çš„æ–¹å¼ã€‚
â€ƒparameters: `Object` (å¿…éœ€): å‚æ•°å­—æ®µå¿…é¡»ä¼ é€’ä¸€ä¸ªJson Schemaå¯¹è±¡ï¼Œä»¥å‡†ç¡®å®šä¹‰å‡½æ•°æ¥å—çš„å‚æ•°ã€‚å¦‚æœè°ƒç”¨å‡½æ•°æ—¶ä¸éœ€è¦å‚æ•°ï¼Œåˆ™å¯ä»¥çœç•¥æ­¤å‚æ•°ã€‚
"parameters": {
  "type": "object",
  "properties": { "location": { 
    "type": "string",
    "description": "åŸå¸‚ï¼Œä¾‹å¦‚ï¼šåŒ—äº¬" 
  }, 
  "unit": { "type": "string", "enum": ["celsius", "fahrenheit"] }
},
"required": ["location"]
}
æ›´å¤šè¯¦æƒ…ï¼šå‡½æ•°è°ƒç”¨ä½¿ç”¨æŒ‡å—

retrieval: `Object`
æè¿°: ä»…å½“å·¥å…·ç±»å‹ä¸º retrieval æ—¶è¡¥å……ã€‚
â€ƒknowledge_id: `String` (å¿…éœ€): æ¶‰åŠçŸ¥è¯†åº“IDæ—¶ï¼Œè¯·å‰å¾€å¼€æ”¾å¹³å°çš„çŸ¥è¯†åº“æ¨¡å—åˆ›å»ºæˆ–è·å–ã€‚
â€ƒprompt_template: `String` (éå¿…éœ€): è¯·æ±‚æ¨¡å‹æ—¶çš„çŸ¥è¯†åº“æ¨¡æ¿ï¼Œé»˜è®¤æ¨¡æ¿ï¼š
â€ƒ```ä»æ–‡æ¡£ "{{ knowledge }}" ä¸­æŸ¥æ‰¾é—®é¢˜çš„ç­”æ¡ˆ "{{question}}" å¦‚æœæ‰¾åˆ°ç­”æ¡ˆï¼Œä»…ä½¿ç”¨æ–‡æ¡£çš„é™ˆè¿°æ¥å›ç­”é—®é¢˜ï¼›å¦‚æœæœªæ‰¾åˆ°ï¼Œåˆ™ä½¿ç”¨è‡ªå·±çš„çŸ¥è¯†å›ç­”ï¼Œå¹¶å‘ŠçŸ¥ç”¨æˆ·æ­¤ä¿¡æ¯ä¸æ˜¯æ¥è‡ªæ–‡æ¡£ã€‚ä¸è¦é‡å¤é—®é¢˜ï¼Œç›´æ¥å¼€å§‹å›ç­”ã€‚```
ç”¨æˆ·è‡ªå®šä¹‰æ¨¡æ¿æ—¶ï¼ŒçŸ¥è¯†åº“å†…å®¹å ä½ç¬¦å’Œç”¨æˆ·ç«¯é—®é¢˜å ä½ç¬¦å¿…é¡»åˆ†åˆ«ä¸º{{ knowledge }}å’Œ{{ question }};
æ›´å¤šè¯¦æƒ…ï¼šRetrievalä½¿ç”¨æŒ‡å—

web_search: `Object`
æè¿°: ä»…å½“å·¥å…·ç±»å‹ä¸º web_search æ—¶è¡¥å……ï¼Œå¦‚æœtoolsä¸­å­˜åœ¨type retrievalï¼Œåˆ™web_searchå°†ä¸ç”Ÿæ•ˆã€‚
â€ƒenable: `Boolean` (éå¿…éœ€): ç½‘ç»œæœç´¢åŠŸèƒ½ï¼šé»˜è®¤ä¸ºå…³é—­çŠ¶æ€ï¼ˆFalseï¼‰ã€‚å¯ç”¨æœç´¢ï¼šè®¾ç½®ä¸º `True`ã€‚ç¦ç”¨æœç´¢ï¼šè®¾ç½®ä¸º `False`ã€‚
â€ƒsearch_query: `String` (éå¿…éœ€): å¼ºåˆ¶è‡ªå®šä¹‰æœç´¢é”®å†…å®¹ã€‚
â€ƒsearch_result: `Boolean` (éå¿…éœ€): è·å–ç½‘é¡µæœç´¢æ¥æºçš„è¯¦ç»†ä¿¡æ¯ã€‚é»˜è®¤ç¦ç”¨ã€‚å¯ç”¨ï¼štrueï¼Œç¦ç”¨ï¼šfalseã€‚
æ›´å¤šè¯¦æƒ…ï¼šweb_searchä½¿ç”¨æŒ‡å—

tool_choice	Stringæˆ–Object	å¦	ç”¨äºæ§åˆ¶æ¨¡å‹é€‰æ‹©è°ƒç”¨å“ªä¸ªå‡½æ•°çš„æ–¹å¼ï¼Œä»…åœ¨å·¥å…·ç±»å‹ä¸ºfunctionæ—¶è¡¥å……ã€‚é»˜è®¤autoï¼Œç›®å‰ä»…æ”¯æŒautoã€‚
user_id	String	å¦	ç»ˆç«¯ç”¨æˆ·çš„å”¯ä¸€IDï¼Œå¸®åŠ©å¹³å°å¯¹ç»ˆç«¯ç”¨æˆ·çš„éæ³•æ´»åŠ¨ã€ç”Ÿæˆéæ³•ä¸å½“ä¿¡æ¯æˆ–å…¶ä»–æ»¥ç”¨è¡Œä¸ºè¿›è¡Œå¹²é¢„ã€‚IDé•¿åº¦è¦æ±‚ï¼šè‡³å°‘6ä¸ªå­—ç¬¦ï¼Œæœ€å¤š128ä¸ªå­—ç¬¦ã€‚
message æ ¼å¼
System Message æ ¼å¼

å‚æ•°åç§°	ç±»å‹	å¿…å¡«	å‚æ•°è¯´æ˜
role	String	æ˜¯	æ¶ˆæ¯çš„è§’è‰²ä¿¡æ¯ï¼Œæ­¤æ—¶åº”ä¸ºsystem
content	String	æ˜¯	æ¶ˆæ¯å†…å®¹
User Message Format

å‚æ•°åç§°	ç±»å‹	å¿…å¡«	å‚æ•°è¯´æ˜
role	String	æ˜¯	æ¶ˆæ¯çš„è§’è‰²ä¿¡æ¯ï¼Œæ­¤æ—¶åº”ä¸ºuser
content	String	æ˜¯	æ¶ˆæ¯å†…å®¹
Assistant Message Format

å‚æ•°åç§°	ç±»å‹	å¿…å¡«	å‚æ•°è¯´æ˜
role	String	æ˜¯	æ¶ˆæ¯çš„è§’è‰²ä¿¡æ¯ï¼Œæ­¤æ—¶åº”ä¸ºassistant
content	String	æ˜¯	"content"ä¸"tool_calls"äºŒå¿…é€‰ä¸€ã€‚
æ¶ˆæ¯å†…å®¹ã€‚å…¶ä¸­åŒ…æ‹¬äº†tool_callså­—æ®µï¼Œcontentå­—æ®µä¸ºç©ºã€‚
tool_calls	List	æ˜¯	"content"ä¸"tool_calls"äºŒå¿…é€‰ä¸€ã€‚
æ¨¡å‹äº§ç”Ÿçš„å·¥å…·è°ƒç”¨æ¶ˆæ¯
â€ƒid	String	æ˜¯	å·¥å…·id
â€ƒtype	String	æ˜¯	å·¥å…·ç±»å‹, æ”¯æŒweb_searchã€retrievalã€function
â€ƒfunction	Object	å¦	typeä¸º"function"æ—¶ä¸ä¸ºç©º
â€ƒâ€ƒname	String	æ˜¯	å‡½æ•°åç§°
â€ƒâ€ƒarguments	String	æ˜¯	æ¨¡å‹ç”Ÿæˆçš„è°ƒç”¨å‡½æ•°çš„å‚æ•°åˆ—è¡¨ï¼ŒJSON æ ¼å¼ã€‚è¯·æ³¨æ„ï¼Œæ¨¡å‹å¯èƒ½ä¼šç”Ÿæˆæ— æ•ˆçš„JSONï¼Œä¹Ÿå¯èƒ½ä¼šè™šæ„ä¸€äº›ä¸åœ¨æ‚¨çš„å‡½æ•°è§„èŒƒä¸­çš„å‚æ•°ã€‚åœ¨è°ƒç”¨å‡½æ•°ä¹‹å‰ï¼Œè¯·åœ¨ä»£ç ä¸­éªŒè¯è¿™äº›å‚æ•°æ˜¯å¦æœ‰æ•ˆã€‚
Tool Messageæ ¼å¼

Tool Messageè¡¨ç¤ºè°ƒç”¨å·¥å…·åçš„è¿”å›ç»“æœã€‚æ¨¡å‹ç„¶åæ ¹æ®å·¥å…·æ¶ˆæ¯è¾“å‡ºè‡ªç„¶è¯­è¨€æ ¼å¼çš„æ¶ˆæ¯ç»™ç”¨æˆ·ã€‚

å‚æ•°åç§°	ç±»å‹	å¿…å¡«	å‚æ•°æè¿°
role	String	æ˜¯	æ¶ˆæ¯çš„è§’è‰²ä¿¡æ¯ï¼Œæ­¤æ—¶åº”ä¸ºtoolã€‚
content	String	æ˜¯	å·¥å…·æ¶ˆæ¯çš„å†…å®¹ï¼Œè°ƒç”¨å·¥å…·åçš„è¿”å›ç»“æœã€‚
tool_call_id	String	æ˜¯	å·¥å…·è°ƒç”¨çš„è®°å½•ã€‚
å“åº”å‚æ•°
å‚æ•°åç§°	ç±»å‹	å‚æ•°æè¿°
id	String	ä»»åŠ¡ID
created	Long	è¯·æ±‚åˆ›å»ºæ—¶é—´ï¼Œä¸ºUnixæ—¶é—´æˆ³ï¼Œå•ä½ä¸ºç§’
model	String	æ¨¡å‹åç§°
choices	List	å½“å‰å¯¹è¯çš„æ¨¡å‹è¾“å‡ºå†…å®¹
â€ƒindex	Integer	ç»“æœç´¢å¼•
â€ƒfinish_reason	String	æ¨¡å‹æ¨ç†ç»ˆæ­¢çš„åŸå› ã€‚å¯ä»¥æ˜¯â€™stopâ€™ã€â€˜tool_callsâ€™ã€â€˜lengthâ€™ã€â€˜sensitiveâ€™æˆ–â€™network_errorâ€™ã€‚
message	Object	æ¨¡å‹è¿”å›çš„æ–‡æœ¬æ¶ˆæ¯
â€ƒrole	String	å½“å‰å¯¹è¯è§’è‰²ï¼Œé»˜è®¤ä¸ºâ€™assistantâ€™ï¼ˆæ¨¡å‹ï¼‰
â€ƒcontent	String	å½“å‰å¯¹è¯å†…å®¹ã€‚å‘½ä¸­å‡½æ•°æ—¶ä¸ºnullï¼Œå¦åˆ™è¿”å›æ¨¡å‹æ¨ç†ç»“æœã€‚
â€ƒtool_calls	List<Object>	æ¨¡å‹ç”Ÿæˆçš„åº”è°ƒç”¨çš„å‡½æ•°åç§°å’Œå‚æ•°ã€‚
â€ƒâ€ƒfunction	Object	åŒ…å«æ¨¡å‹ç”Ÿæˆçš„å‡½æ•°åç§°å’ŒJSONæ ¼å¼çš„å‚æ•°ã€‚
â€ƒâ€ƒâ€ƒname	String	æ¨¡å‹ç”Ÿæˆçš„å‡½æ•°åç§°ã€‚
â€ƒâ€ƒâ€ƒarguments	Object	æ¨¡å‹ç”Ÿæˆçš„å‡½æ•°è°ƒç”¨å‚æ•°çš„JSONæ ¼å¼ã€‚è°ƒç”¨å‡½æ•°å‰è¯·éªŒè¯å‚æ•°ã€‚
â€ƒâ€ƒid	String	å‘½ä¸­å‡½æ•°çš„å”¯ä¸€æ ‡è¯†ç¬¦ã€‚
â€ƒâ€ƒtype	String	æ¨¡å‹è°ƒç”¨çš„å·¥å…·ç±»å‹ï¼Œç›®å‰ä»…æ”¯æŒâ€™functionâ€™ã€‚
usage	Object	æ¨¡å‹è°ƒç”¨ç»“æŸæ—¶è¿”å›çš„tokenä½¿ç”¨ç»Ÿè®¡ã€‚
â€ƒprompt_tokens	Integer	ç”¨æˆ·è¾“å…¥çš„tokenæ•°é‡
â€ƒcompletion_tokens	Integer	æ¨¡å‹è¾“å‡ºçš„tokenæ•°é‡
â€ƒtotal_tokens	Integer	æ€»tokenæ•°é‡
web_search	List	è¿”å›ä¸ç½‘é¡µæœç´¢ç›¸å…³çš„ä¿¡æ¯ã€‚icon
â€ƒicon	String	æ¥æºç½‘ç«™çš„å›¾æ ‡
â€ƒtitle	String	æœç´¢ç»“æœçš„æ ‡é¢˜
â€ƒlink	String	æœç´¢ç»“æœçš„ç½‘é¡µé“¾æ¥
â€ƒmedia	String	æœç´¢ç»“æœç½‘é¡µçš„åª’ä½“æ¥æºåç§°
â€ƒcontent	String	æœç´¢ç»“æœç½‘é¡µå¼•ç”¨çš„æ–‡æœ¬å†…å®¹
è¯·æ±‚ç¤ºä¾‹
from zhipuai import ZhipuAI
client = ZhipuAI(api_key="")  # è¯·å¡«å†™æ‚¨è‡ªå·±çš„APIKey
response = client.chat.completions.create(
    model="glm-4",  # è¯·å¡«å†™æ‚¨è¦è°ƒç”¨çš„æ¨¡å‹åç§°
    messages=[
        {"role": "user", "content": "ä½œä¸ºä¸€åè¥é”€ä¸“å®¶ï¼Œè¯·ä¸ºæˆ‘çš„äº§å“åˆ›ä½œä¸€ä¸ªå¸å¼•äººçš„å£å·"},
        {"role": "assistant", "content": "å½“ç„¶ï¼Œè¦åˆ›ä½œä¸€ä¸ªå¸å¼•äººçš„å£å·ï¼Œè¯·å‘Šè¯‰æˆ‘ä¸€äº›å…³äºæ‚¨äº§å“çš„ä¿¡æ¯"},
        {"role": "user", "content": "æ™ºè°±AIå¼€æ”¾å¹³å°"},
        {"role": "assistant", "content": "ç‚¹ç‡ƒæœªæ¥ï¼Œæ™ºè°±AIç»˜åˆ¶æ— é™ï¼Œè®©åˆ›æ–°è§¦æ‰‹å¯åŠï¼"},
        {"role": "user", "content": "åˆ›ä½œä¸€ä¸ªæ›´ç²¾å‡†ä¸”å¸å¼•äººçš„å£å·"}
    ],
)
print(response.choices[0].message)
å“åº”ç¤ºä¾‹

{
  "created": 1703487403,
  "id": "8239375684858666781",
  "model": "glm-4",
  "request_id": "8239375684858666781",
  "choices": [
      {
          "finish_reason": "stop",
          "index": 0,
          "message": {
              "content": "ä»¥AIç»˜è“å›¾ â€” æ™ºè°±AIï¼Œè®©åˆ›æ–°çš„æ¯ä¸€åˆ»æˆä¸ºå¯èƒ½ã€‚",
              "role": "assistant"
          }
      }
  ],
  "usage": {
      "completion_tokens": 217,
      "prompt_tokens": 31,
      "total_tokens": 248
  }
}
æµå¼è¾“å‡º
å“åº”å‚æ•°
å‚æ•°åç§°	ç±»å‹	å‚æ•°æè¿°
id	String	æ™ºè°±AIå¼€æ”¾å¹³å°ç”Ÿæˆçš„ä»»åŠ¡åºå·ï¼Œè°ƒç”¨è¯·æ±‚ç»“æœæ¥å£æ—¶è¯·ä½¿ç”¨æ­¤åºå·
created	Long	è¯·æ±‚åˆ›å»ºæ—¶é—´ï¼Œä¸ºUnixæ—¶é—´æˆ³ï¼Œå•ä½ä¸ºç§’
choices	List	å½“å‰å¯¹è¯çš„æ¨¡å‹è¾“å‡ºå†…å®¹
â€ƒindex	Integer	ç»“æœç´¢å¼•
â€ƒfinish_reason	String	æ¨¡å‹æ¨ç†ç»ˆæ­¢çš„åŸå› ã€‚'stopâ€™è¡¨ç¤ºè‡ªç„¶ç»“æŸæˆ–è§¦å‘stopè¯ï¼Œ'tool_callsâ€™è¡¨ç¤ºæ¨¡å‹å‘½ä¸­å‡½æ•°ï¼Œ'lengthâ€™è¡¨ç¤ºè¾¾åˆ°tokené•¿åº¦é™åˆ¶ï¼Œ'sensitiveâ€™è¡¨ç¤ºå†…å®¹è¢«å®‰å…¨å®¡æ ¸æ¥å£æ‹¦æˆªï¼ˆç”¨æˆ·åº”åˆ¤æ–­å¹¶å†³å®šæ˜¯å¦æ’¤å›å…¬å¼€å†…å®¹ï¼‰ï¼Œ'network_errorâ€™è¡¨ç¤ºæ¨¡å‹æ¨ç†å¼‚å¸¸ã€‚
â€ƒdelta	Object	æ¨¡å‹å¢é‡è¿”å›çš„æ–‡æœ¬ä¿¡æ¯
â€ƒrole	String	å½“å‰å¯¹è¯è§’è‰²ï¼Œé»˜è®¤ä¸ºâ€™assistantâ€™ï¼ˆæ¨¡å‹ï¼‰
â€ƒcontent	String	å½“å‰å¯¹è¯å†…å®¹ã€‚å‘½ä¸­å‡½æ•°æ—¶ä¸ºnullï¼Œå¦åˆ™è¿”å›æ¨¡å‹æ¨ç†ç»“æœã€‚
â€ƒtool_calls	List	æ¨¡å‹ç”Ÿæˆçš„åº”è°ƒç”¨çš„å‡½æ•°åç§°å’Œå‚æ•°ã€‚
â€ƒâ€ƒfunction	Object	åŒ…å«æ¨¡å‹ç”Ÿæˆçš„å‡½æ•°åç§°å’ŒJSONæ ¼å¼çš„å‚æ•°ã€‚
â€ƒâ€ƒâ€ƒname	String	æ¨¡å‹ç”Ÿæˆçš„å‡½æ•°åç§°ã€‚
â€ƒâ€ƒâ€ƒarguments	Object	æ¨¡å‹ç”Ÿæˆçš„å‡½æ•°è°ƒç”¨å‚æ•°çš„JSONæ ¼å¼ã€‚è°ƒç”¨å‡½æ•°å‰è¯·éªŒè¯å‚æ•°ã€‚
â€ƒâ€ƒid	String	å‘½ä¸­å‡½æ•°çš„å”¯ä¸€æ ‡è¯†ç¬¦ã€‚
â€ƒâ€ƒtype	String	æ¨¡å‹è°ƒç”¨çš„å·¥å…·ç±»å‹ï¼Œç›®å‰ä»…æ”¯æŒâ€™functionâ€™ã€‚
usage	Object	æ¨¡å‹è°ƒç”¨ç»“æŸæ—¶è¿”å›çš„tokenä½¿ç”¨ç»Ÿè®¡ã€‚
â€ƒprompt_tokens	Integer	ç”¨æˆ·è¾“å…¥çš„tokenæ•°é‡
â€ƒcompletion_tokens â€ƒ	Integer	æ¨¡å‹è¾“å‡ºçš„tokenæ•°é‡
â€ƒtotal_tokens	Integer	æ€»tokenæ•°é‡
web_search	List	è¿”å›ä¸ç½‘é¡µæœç´¢ç›¸å…³çš„ä¿¡æ¯ã€‚icon
â€ƒicon	String	æ¥æºç½‘ç«™çš„å›¾æ ‡
â€ƒtitle	String	æœç´¢ç»“æœçš„æ ‡é¢˜
â€ƒlink	String	æœç´¢ç»“æœçš„ç½‘é¡µé“¾æ¥
â€ƒmedia	String	æœç´¢ç»“æœç½‘é¡µçš„åª’ä½“æ¥æºåç§°
â€ƒcontent	String	æœç´¢ç»“æœç½‘é¡µå¼•ç”¨çš„æ–‡æœ¬å†…å®¹
è¯·æ±‚ç¤ºä¾‹
æˆ‘ä»¬å·²ç»å‡çº§åˆ°æœ€æ–°çš„æ¨¡å‹GLM-4å’ŒGLM-3-Turboï¼Œæ”¯æŒç³»ç»Ÿæç¤ºã€å‡½æ•°è°ƒç”¨ã€æ£€ç´¢ã€Web_Searchç­‰æ–°åŠŸèƒ½ã€‚è¦ä½¿ç”¨è¿™äº›æ–°åŠŸèƒ½ï¼Œéœ€è¦å‡çº§åˆ°æœ€æ–°ç‰ˆæœ¬çš„Python SDKã€‚å¦‚æœæ‚¨å®‰è£…äº†æ—§ç‰ˆæœ¬çš„SDKï¼Œè¯·æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬ã€‚

pip install --upgrade zhipuai
from zhipuai import ZhipuAI
client = ZhipuAI(api_key="")  # è¯·å¡«å†™æ‚¨è‡ªå·±çš„APIKey
response = client.chat.completions.create(
    model="glm-4",  # è¯·å¡«å†™æ‚¨è¦è°ƒç”¨çš„æ¨¡å‹åç§°
    messages=[
        {"role": "system", "content": "ä½ æ˜¯ä¸€ä¸ªä¹äºå›ç­”å„ç§é—®é¢˜çš„å°åŠ©æ‰‹ï¼Œä½ çš„ä»»åŠ¡æ˜¯æä¾›ä¸“ä¸šã€å‡†ç¡®ã€æœ‰æ´å¯ŸåŠ›çš„å»ºè®®ã€‚"},
        {"role": "user", "content": "æˆ‘å¯¹å¤ªé˜³ç³»çš„è¡Œæ˜Ÿéå¸¸æ„Ÿå…´è¶£ï¼Œå°¤å…¶æ˜¯åœŸæ˜Ÿã€‚è¯·æä¾›å…³äºåœŸæ˜Ÿçš„åŸºæœ¬ä¿¡æ¯ï¼ŒåŒ…æ‹¬å®ƒçš„å¤§å°ã€ç»„æˆã€ç¯ç³»ç»Ÿä»¥åŠä»»ä½•ç‹¬ç‰¹çš„å¤©æ–‡ç°è±¡ã€‚"},
    ],
    stream=True,
)
for chunk in response:
    print(chunk.choices[0].delta)
å“åº”ç¤ºä¾‹:

data: {"id":"8313807536837492492","created":1706092316,"model":"glm-4","choices":[{"index":0,"delta":{"role":"assistant","content":"åœŸ"}}]}
data: {"id":"8313807536837492492","created":1706092316,"model":"glm-4","choices":[{"index":0,"delta":{"role":"assistant","content":"æ˜Ÿ"}}]}
....
data: {"id":"8313807536837492492","created":1706092316,"model":"glm-4","choices":[{"index":0,"delta":{"role":"assistant","content":"ï¼Œ"}}]}
data: {"id":"8313807536837492492","created":1706092316,"model":"glm-4","choices":[{"index":0,"delta":{"role":"assistant","content":"ä¸»è¦ç”±"}}]}
data: {"id":"8313807536837492492","created":1706092316,"model":"glm-4","choices":[{"index":0,"finish_reason":"length","delta":{"role":"assistant","content":""}}],"usage":{"prompt_tokens":60,"completion_tokens":100,"total_tokens":160}}
data: [DONE]
å‡½æ•°è°ƒç”¨
è¯·æ±‚ç¤ºä¾‹
from zhipuai import ZhipuAI

client = ZhipuAI(api_key="") # è¯·å¡«å†™æ‚¨è‡ªå·±çš„APIKey

tools = [
    {
        "type": "function",
        "function": {
            "name": "query_train_info",
            "description": "æ ¹æ®ç”¨æˆ·æä¾›çš„ä¿¡æ¯æŸ¥è¯¢ç«è½¦æ—¶åˆ»",
            "parameters": {
                "type": "object",
                "properties": {
                    "departure": {
                        "type": "string",
                        "description": "å‡ºå‘åŸå¸‚æˆ–è½¦ç«™",
                    },
                    "destination": {
                        "type": "string",
                        "description": "ç›®çš„åœ°åŸå¸‚æˆ–è½¦ç«™",
                    },
                    "date": {
                        "type": "string",
                        "description": "è¦æŸ¥è¯¢çš„ç«è½¦æ—¥æœŸ",
                    },
                },
                "required": ["departure", "destination", "date"],
            },
        }
    }
]
messages = [
    {
        "role": "user",
        "content": "ä½ èƒ½å¸®æˆ‘æŸ¥ä¸€ä¸‹2024å¹´1æœˆ1æ—¥ä»åŒ—äº¬å—ç«™åˆ°ä¸Šæµ·çš„ç«è½¦ç¥¨å—ï¼Ÿ"
    }
]
response = client.chat.completions.create(
    model="glm-4", # è¯·å¡«å†™æ‚¨è¦è°ƒç”¨çš„æ¨¡å‹åç§°
    messages=messages,
    tools=tools,
    tool_choice="auto",
)
print(response.choices[0].message)
å“åº”ç¤ºä¾‹

{
  "id": "8231168139794583938",
  "model": "glm-4",
  "request_id": "8231168139794583938",
  "created": 1703490288,
  "choices": [
      {
          "finish_reason": "tool_calls",
          "index": 0,
          "message": {
              "role": "assistant",
              "tool_calls": [
                  {
                      "id": "call_8231168139794583938",
                      "index": 0,
                      "type": "function",
                      "function": {
                          "arguments": '{"date": "2024-01-01","departure": "åŒ—äº¬å—ç«™","destination": "ä¸Šæµ·"}',
                          "name": "query_train_info"
                      }
                  }
              ]
          }
      }
  ],
  "usage": {
      "completion_tokens": 31,
      "prompt_tokens": 120,
      "total_tokens": 151
  }
}
å¼‚æ­¥è°ƒç”¨
æ¥å£è¯·æ±‚

ç±»å‹	è¯´æ˜
ä¼ è¾“æ–¹å¼	HTTPS
è¯·æ±‚URL	https://open.bigmodel.cn/api/paas/v4/async/chat/completions
è°ƒç”¨æ–¹å¼	å¼‚æ­¥ï¼Œç»“æœå¿…é¡»é€šè¿‡æŸ¥è¯¢æ¥å£è·å–
å­—ç¬¦ç¼–ç 	UTF-8
è¯·æ±‚æ ¼å¼	JSON
å“åº”æ ¼å¼	JSON
HTTPæ–¹æ³•	POST
å¼€å‘è¯­è¨€	ä»»ä½•èƒ½å¤Ÿå‘èµ·HTTPè¯·æ±‚çš„å¼€å‘è¯­è¨€
è¯·æ±‚å‚æ•°
è¯·æ±‚å‚æ•°ä¸åŒæ­¥APIè°ƒç”¨ç›¸åŒã€‚

å“åº”å‚æ•°
å‚æ•°åç§°	ç±»å‹	æè¿°
request_id	String	è¯·æ±‚å‘èµ·æ—¶å®¢æˆ·ç«¯æäº¤çš„ä»»åŠ¡å·æˆ–å¹³å°ç”Ÿæˆçš„ä»»åŠ¡å·ã€‚
id	String	æ™ºè°±AIå¼€æ”¾å¹³å°ç”Ÿæˆçš„ä»»åŠ¡åºå·ï¼ŒæŸ¥è¯¢ç»“æœæ—¶ä½¿ç”¨æ­¤åºå·ã€‚
model	String	APIè¯·æ±‚æ—¶è°ƒç”¨çš„æ¨¡å‹åç§°ã€‚
task_status	string	è¯·æ±‚çš„å¤„ç†çŠ¶æ€ï¼šPROCESSINGï¼ˆå¤„ç†ä¸­ï¼‰ï¼ŒSUCCESSï¼ˆæˆåŠŸï¼‰ï¼ŒFAILï¼ˆå¤±è´¥ï¼‰ã€‚æ­¤çŠ¶æ€å¿…é¡»æŸ¥è¯¢æ‰èƒ½ç¡®å®šç»“æœã€‚
è°ƒç”¨ç¤ºä¾‹
from zhipuai import ZhipuAI

client = ZhipuAI(api_key="") # è¯·å¡«å†™æ‚¨è‡ªå·±çš„APIKey
response = client.chat.asyncCompletions.create(
    model="glm-4",  # è¯·å¡«å†™æ‚¨è¦è°ƒç”¨çš„æ¨¡å‹åç§°
    messages=[
        {
            "role": "user",
            "content": "
ä½œä¸ºç«¥è¯ä¹‹ç‹ï¼Œè¯·ä»¥å§‹ç»ˆä¿æŒä¸€é¢—å–„è‰¯çš„å¿ƒä¸ºä¸»é¢˜ï¼Œå†™ä¸€ç¯‡ç®€çŸ­çš„ç«¥è¯æ•…äº‹ã€‚æ•…äº‹åº”èƒ½æ¿€å‘å­©å­ä»¬çš„å­¦ä¹ å…´è¶£å’Œæƒ³è±¡åŠ›ï¼ŒåŒæ—¶å¸®åŠ©ä»–ä»¬æ›´å¥½åœ°ç†è§£å’Œæ¥å—æ•…äº‹ä¸­è•´å«çš„é“å¾·å’Œä»·å€¼è§‚ã€‚"
        }
    ],
)
print(response)
å“åº”ç¤ºä¾‹

id='123456789' request_id='654321' model='glm-4' task_status='PROCESSING'
ä»»åŠ¡ç»“æœæŸ¥è¯¢
æ¥å£è¯·æ±‚

ç±»å‹	è¯´æ˜
ä¼ è¾“æ–¹å¼	https
è¯·æ±‚URL	https://open.bigmodel.cn/api/paas/v4/async-result/{id}
è°ƒç”¨æ–¹å¼	åŒæ­¥è°ƒç”¨ï¼Œç­‰å¾…æ¨¡å‹å®Œå…¨æ‰§è¡Œå¹¶è¿”å›æœ€ç»ˆç»“æœ
å­—ç¬¦ç¼–ç 	UTF-8
è¯·æ±‚æ ¼å¼	JSON
å“åº”æ ¼å¼	JSON
HTTPæ–¹æ³•	GET
å¼€å‘è¯­è¨€	åŒæ­¥è°ƒç”¨ï¼Œç­‰å¾…æ¨¡å‹å®Œå…¨æ‰§è¡Œå¹¶è¿”å›æœ€ç»ˆç»“æœ
è¯·æ±‚å‚æ•°
å‚æ•°åç§°	ç±»å‹	å¿…å¡«	æè¿°
id	String	æ˜¯	ä»»åŠ¡id
å“åº”å‚æ•°
å‚æ•°åç§°	ç±»å‹	æè¿°
model	String	æ¨¡å‹åç§°
â€ƒchoices	List	å½“å‰å¯¹è¯æ¨¡å‹è¾“å‡ºå†…å®¹ï¼Œç›®å‰ä»…è¿”å›ä¸€ä¸ª
â€ƒâ€ƒindex	Integer	ç»“æœç´¢å¼•
â€ƒâ€ƒfinish_reason	String	æ¨¡å‹æ¨ç†ç»ˆæ­¢çš„åŸå› ã€‚"stop"è¡¨ç¤ºè‡ªç„¶ç»“æŸæˆ–è§¦å‘stopè¯ï¼Œ"length"è¡¨ç¤ºè¾¾åˆ°tokené•¿åº¦é™åˆ¶ã€‚
â€ƒmessage	Object	æ¨¡å‹è¿”å›çš„æ–‡æœ¬æ¶ˆæ¯
â€ƒrole	String	å½“å‰å¯¹è¯è§’è‰²ï¼Œç›®å‰é»˜è®¤ä¸ºassistantï¼ˆæ¨¡å‹ï¼‰
â€ƒcontent	String	å½“å‰å¯¹è¯å†…å®¹
â€ƒtool_calls	List	æ¨¡å‹ç”Ÿæˆçš„åº”è°ƒç”¨çš„å‡½æ•°åç§°å’Œå‚æ•°ã€‚
â€ƒfunction	Object	
â€ƒâ€ƒname	String	æ¨¡å‹ç”Ÿæˆçš„åº”è°ƒç”¨çš„å‡½æ•°åç§°ã€‚
â€ƒâ€ƒarguments	String	æ¨¡å‹ç”Ÿæˆçš„å‡½æ•°è°ƒç”¨å‚æ•°çš„JSONæ ¼å¼ã€‚æ³¨æ„ï¼Œæ¨¡å‹ç”Ÿæˆçš„JSONä¸ä¸€å®šæœ‰æ•ˆï¼Œå¯èƒ½åŒ…å«å‡½æ•°æ¨¡å¼ä¸­æœªå®šä¹‰çš„å‚æ•°ã€‚åœ¨è°ƒç”¨å‡½æ•°å‰ï¼Œè¯·åœ¨ä½ çš„ä»£ç ä¸­éªŒè¯å‚æ•°ã€‚
â€ƒid	String	å‘½ä¸­å‡½æ•°çš„å”¯ä¸€æ ‡è¯†ç¬¦ã€‚
â€ƒtype	String	æ¨¡å‹è°ƒç”¨çš„å·¥å…·ç±»å‹ï¼Œç›®å‰ä»…æ”¯æŒâ€™functionâ€™ã€‚"
task_status	String	å¤„ç†çŠ¶æ€ï¼šPROCESSINGï¼ˆå¤„ç†ä¸­ï¼‰ï¼ŒSUCCESSï¼ˆæˆåŠŸï¼‰ï¼ŒFAILï¼ˆå¤±è´¥ï¼‰
request_id	String	å®¢æˆ·ç«¯è¯·æ±‚æ—¶æäº¤çš„ä»»åŠ¡å·æˆ–å¹³å°ç”Ÿæˆçš„ä»»åŠ¡å·
id	String	æ™ºè°±AIå¼€æ”¾å¹³å°ç”Ÿæˆçš„ä»»åŠ¡åºå·ï¼Œè°ƒç”¨è¯·æ±‚ç»“æœæ¥å£æ—¶ä½¿ç”¨æ­¤åºå·
usage	Object	æœ¬æ¬¡æ¨¡å‹è°ƒç”¨çš„tokenç»Ÿè®¡
â€ƒprompt_tokens	int	ç”¨æˆ·è¾“å…¥çš„tokenæ•°é‡
â€ƒcompletion_tokens	int	æ¨¡å‹è¾“å‡ºçš„tokenæ•°é‡
â€ƒtotal_tokens	int	æ€»tokenæ•°é‡
è¯·æ±‚ç¤ºä¾‹
import time
from zhipuai import ZhipuAI

client = ZhipuAI(api_key="") # è¯·å¡«å†™æ‚¨è‡ªå·±çš„APIKey

response = client.chat.asyncCompletions.create(
    model="glm-4",  # è¯·å¡«å†™æ‚¨è¦è°ƒç”¨çš„æ¨¡å‹åç§°
    messages=[
        {
            "role": "user",
            "content": "
ä½œä¸ºç«¥è¯ä¹‹ç‹ï¼Œè¯·ä»¥å§‹ç»ˆä¿æŒä¸€é¢—å–„è‰¯çš„å¿ƒä¸ºä¸»é¢˜ï¼Œå†™ä¸€ç¯‡ç®€çŸ­çš„ç«¥è¯æ•…äº‹ã€‚æ•…äº‹åº”èƒ½æ¿€å‘å­©å­ä»¬çš„å­¦ä¹ å…´è¶£å’Œæƒ³è±¡åŠ›ï¼ŒåŒæ—¶å¸®åŠ©ä»–ä»¬æ›´å¥½åœ°ç†è§£å’Œæ¥å—æ•…äº‹ä¸­è•´å«çš„é“å¾·å’Œä»·å€¼è§‚ã€‚"
        }
    ],
)
task_id = response.id
task_status = ''
get_cnt = 0

while task_status != 'SUCCESS' and task_status != 'FAILED' and get_cnt <= 40:
    result_response = client.chat.asyncCompletions.retrieve_completion_result(id=task_id)
    print(result_response)
    task_status = result_response.task_status

    time.sleep(2)
    get_cnt += 1
    
å“åº”ç¤ºä¾‹:

{"id":"123456789","request_id":"123123123","model":null,"task_status":"PROCESSING"}
{"id":"123456789","request_id":"123123123","model":null,"task_status":"PROCESSING"}

... ...

{"id":"123456789","request_id":"123123123","model":null,"task_status":"PROCESSING"}
{
    "id": "123456789",
    "request_id": "123123123",
    "model": "glm-4",
    "task_status": "SUCCESS",
    "choices": [
        {
            "index": 0,
            "finish_reason": "stop",
            "message": {
                "content": "ä»å‰ï¼Œæœ‰ä¸€ä¸ªç¾ä¸½çš„æ‘åº„ï¼Œé‚£é‡Œçš„å­©å­ä»¬éƒ½å–œæ¬¢ä¸€èµ·ç©è€ã€å­¦ä¹ å’Œæ¢ç´¢ã€‚å…¶ä¸­æœ‰ä¸€ä¸ªå°ç”·å­©å«å°æ˜ï¼Œä»–æœ‰ä¸€é¢—å–„è‰¯çš„å¿ƒï¼Œæ€»æ˜¯ä¹äºå¸®åŠ©åˆ«äººã€‚

ä¸€å¤©ï¼Œå°æ˜åœ¨æ£®æ—é‡Œå‘ç°äº†ä¸€åªç¿…è†€å—ä¼¤çš„å°é¸Ÿï¼Œæ— æ³•é£ç¿”ã€‚å°æ˜å¿ƒç–¼è¿™åªå°é¸Ÿï¼Œä¾¿æŠŠå®ƒå¸¦å›å®¶ï¼Œç”¨æ¸©æš–å’Œçˆ±å¿ƒç…§é¡¾å®ƒã€‚åœ¨å°æ˜çš„ç»†å¿ƒç…§æ–™ä¸‹ï¼Œå°é¸Ÿçš„ç¿…è†€æ¸æ¸åº·å¤ï¼Œå¼€å§‹åœ¨æˆ¿é—´é‡Œé£æ¥é£å»ã€‚

çœ‹åˆ°å°é¸Ÿå¥‡è¿¹èˆ¬çš„åº·å¤ï¼Œå°æ˜å¯¹é¸Ÿç±»äº§ç”Ÿäº†æµ“åšçš„å…´è¶£ï¼Œæƒ³è¦äº†è§£æ›´å¤šå…³äºé¸Ÿç±»çš„çŸ¥è¯†ã€‚ä»–å¼€å§‹é˜…è¯»æœ‰å…³é¸Ÿç±»çš„ä¹¦ç±ï¼Œå­¦ä¹ å®ƒä»¬çš„ä¹ æ€§å’Œç”Ÿæ´»æ–¹å¼ã€‚é€šè¿‡å­¦ä¹ ï¼Œå°æ˜å¯¹é¸Ÿç±»æœ‰äº†æ·±åˆ»çš„äº†è§£ï¼Œä»–å’Œé‚£åªå°é¸Ÿä¹Ÿå»ºç«‹äº†æ·±åšçš„å‹è°Šã€‚

ä¸€å¤©ï¼Œå°æ˜åœ¨æ£®æ—é‡Œæ•£æ­¥æ—¶ï¼Œå‘ç°äº†ä¸€åªè¢«å›°åœ¨çŒäººé™·é˜±é‡Œçš„å°å…”å­ã€‚å°æ˜æ¯«ä¸çŠ¹è±«åœ°æ•‘å‡ºäº†å°å…”å­ã€‚å°å…”å­æ„Ÿæ¿€åœ°çœ‹ç€å°æ˜ï¼Œå¹¶å‘Šè¯‰ä»–æ£®æ—é‡Œæœ‰ä¸€ä¸ªç¥ç§˜çš„å®è—â€”â€”ä¸€é¢—èƒ½å®ç°æ„¿æœ›çš„é­”æ³•å®çŸ³ã€‚

å……æ»¡å¥½å¥‡å¿ƒçš„å°æ˜å†³å®šå»å¯»æ‰¾è¿™é¢—å®çŸ³ã€‚ä»–å¸¦ç€å°é¸Ÿå’Œå°å…”å­è¸ä¸Šäº†å†’é™©ä¹‹æ—…ã€‚åœ¨æ—…é€”ä¸­ï¼Œä»–ä»¬é‡åˆ°äº†è®¸å¤šæŒ‘æˆ˜ï¼Œä½†å°æ˜å§‹ç»ˆä¿æŒç€å–„è‰¯çš„å¿ƒï¼Œå‹‡æ•¢åœ°é¢å¯¹æ¯ä¸€ä¸ªå›°éš¾ã€‚ä»–ä¸ä»…å­¦ä¼šäº†å¦‚ä½•ä¸æ£®æ—é‡Œçš„åŠ¨ç‰©ç›¸å¤„ï¼Œè¿˜å­¦ä¼šäº†è®¸å¤šç”Ÿå­˜æŠ€èƒ½ã€‚

ç»è¿‡ä¸€æ®µæ—¶é—´çš„åŠªåŠ›ï¼Œå°æ˜ç»ˆäºæ‰¾åˆ°äº†é‚£é¢—é­”æ³•å®çŸ³ã€‚å®çŸ³å‘å‡ºè€€çœ¼çš„å…‰èŠ’ï¼Œå°†å°æ˜å’Œä»–çš„æœ‹å‹ä»¬å¸¦åˆ°äº†ä¸€ä¸ªç¾ä¸½çš„ä¸–ç•Œã€‚åœ¨é‚£é‡Œï¼Œä»–ä»¬é‡åˆ°äº†ä¸€ä½æ™ºæ…§çš„è€äººï¼Œè€äººå‘Šè¯‰å°æ˜ï¼Œå®çŸ³çš„åŠ›é‡æ¥è‡ªäºä¸€ä¸ªäººçš„å–„è‰¯ä¹‹å¿ƒã€‚åªæœ‰æ‹¥æœ‰å–„è‰¯ä¹‹å¿ƒçš„äººæ‰èƒ½æ¿€æ´»å®çŸ³çš„åŠ›é‡ï¼Œå®ç°è‡ªå·±çš„æ„¿æœ›ã€‚

å°æ˜æ˜ç™½äº†è¿™ä¸ªé“ç†ï¼Œæ„Ÿè°¢äº†è€äººï¼Œå¸¦ç€å®çŸ³å›åˆ°äº†ç°å®ä¸–ç•Œã€‚ä»–ç”¨å®çŸ³çš„åŠ›é‡å¸®åŠ©ä»–äººï¼Œè®©æ‘åº„å˜å¾—æ›´åŠ ç¾å¥½ã€‚å°æ˜æˆä¸ºäº†æ‘åº„é‡Œçš„æ¦œæ ·ï¼Œé€šè¿‡ä»–çš„è¡ŒåŠ¨ï¼Œå­©å­ä»¬æ˜ç™½äº†å§‹ç»ˆä¿æŒä¸€é¢—å–„è‰¯çš„å¿ƒçš„é‡è¦æ€§ã€‚

ä»æ­¤ä»¥åï¼Œå°æ˜å’Œæ‘æ°‘ä»¬å¹¸ç¦åœ°ç”Ÿæ´»åœ¨ä¸€èµ·ã€‚å¬è¿‡å°æ˜æ•…äº‹çš„å­©å­ä»¬æ˜ç™½äº†å–„è‰¯ä¹‹å¿ƒçš„é‡è¦æ€§ã€‚ä»–ä»¬ä»¥å°æ˜ä¸ºæ¦œæ ·ï¼ŒåŠªåŠ›æˆä¸ºä¸€ä¸ªæœ‰çˆ±å¿ƒã€æœ‰è´£ä»»æ„Ÿçš„äººã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œä»–ä»¬çš„å­¦ä¹ å…´è¶£å’Œæƒ³è±¡åŠ›ä¹Ÿè¢«æ¿€å‘ï¼Œæˆé•¿ä¸ºä¼˜ç§€çš„å­©å­ã€‚

è¿™ä¸ªæ•…äº‹å‘Šè¯‰æˆ‘ä»¬ï¼Œå§‹ç»ˆä¿æŒä¸€é¢—å–„è‰¯çš„å¿ƒï¼Œç”¨æˆ‘ä»¬çš„è¡ŒåŠ¨å»å½±å“å‘¨å›´çš„äººã€‚åªæœ‰æ‹¥æœ‰å–„è‰¯ä¹‹å¿ƒçš„äººï¼Œæ‰èƒ½è§£é”è‡ªå·±çš„æ½œåŠ›ï¼Œå®ç°æ¢¦æƒ³ã€‚è®©æˆ‘ä»¬éƒ½åŠªåŠ›æˆä¸ºä¸€ä¸ªæœ‰å–„è‰¯ä¹‹å¿ƒçš„äººã€‚",
                "role": "assistant",
                "tool_calls": null
            }
        }
    ],
    "usage": {
        "prompt_tokens": 52,
        "completion_tokens": 470,
        "total_tokens": 522
    }
}


